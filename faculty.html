<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Faculty Dashboard | ME4261</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;}
body{
  font-family:"Segoe UI",Arial,sans-serif;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  min-height:100vh;
  margin:0;
  display:flex;
  justify-content:center;
}
.card{
  background:#fff;
  width:100%;
  max-width:900px;
  margin:24px 12px;
  padding:28px;
  border-radius:14px;
  box-shadow:0 15px 40px rgba(0,0,0,.25);
}
h1{text-align:center;color:#e67e22;margin-bottom:6px;}
h2{text-align:center;color:#555;font-size:15px;margin-bottom:22px;}

button{
  width:100%;
  padding:14px;
  margin-top:14px;
  border:none;
  border-radius:30px;
  font-size:16px;
  font-weight:600;
  cursor:pointer;
}
button:disabled{
  background:#999;
  cursor:not-allowed;
  opacity:.6;
}

.btn-main{background:linear-gradient(135deg,#f39c12,#e67e22);color:#fff;}
.btn-red{background:#c0392b;color:#fff;}
.btn-close{background:#7f8c8d;color:#fff;}

.btn-blue{background:#1976d2;color:#fff;}
.btn-green{background:#388e3c;color:#fff;}
.btn-orange{background:#f57c00;color:#fff;}
.btn-purple{background:#7b1fa2;color:#fff;}

.section{display:none;margin-top:24px;}

label{font-weight:600;margin-top:12px;display:block;}
input[type=radio], input[type=checkbox]{margin-right:8px;}

.box{
  background:#f8f9fa;
  padding:16px;
  border-radius:12px;
  margin-top:18px;
}

.footer{
  margin-top:32px;
  text-align:center;
  font-size:13px;
  color:#5f6f78;
  font-weight:600;
}
.footer div{font-size:12px;color:#7a8a93;}

#loaderOverlay{
  position:fixed;
  inset:0;
  background:rgba(255,255,255,0.85);
  display:none;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  z-index:9999;
}
.spinner{
  width:48px;
  height:48px;
  border:5px solid #ddd;
  border-top:5px solid #e67e22;
  border-radius:50%;
  animation:spin 1s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg);}}
</style>
</head>

<body>
<div class="card">

<h1>Faculty Dashboard</h1>
<h2>Energy Storage Technology · ME4261</h2>

<!-- HOME -->
<div id="home">
  <button class="btn-main" onclick="openClassTest()">Conduct Class Test</button>
  <button class="btn-red" onclick="logout()">Logout</button>
</div>

<!-- CLASS TEST PANEL -->
<div id="classTest" class="section">
  <h2>Conduct Class Test</h2>

  <!-- TEST SELECTION -->
  <div class="box">
    <button class="btn-blue" onclick="selectTest('CT1')">Class Test – I</button>
    <button class="btn-green" onclick="selectTest('CT2')">Class Test – II</button>
    <button class="btn-orange" onclick="selectTest('CT3')">Class Test – III</button>
    <button class="btn-purple" onclick="selectTest('CT4')">Class Test – IV</button>
  </div>

  <!-- ACTION -->
  <div id="actionPanel" class="box" style="display:none;">
    <label><input type="radio" name="action" onclick="showEnable()"> Enable Class Test</label>
    <label><input type="radio" name="action" onclick="showEvaluate()"> Evaluate Class Test</label>
  </div>

  <!-- ENABLE -->
  <div id="enablePanel" class="box" style="display:none;">
    <label><input type="radio" name="enableMode"> Enable for all students</label>
    <label><input type="radio" name="enableMode"> Enable for attended students</label>
    <label><input type="radio" name="enableMode" onclick="showCustom()"> Custom selection</label>

    <div id="customList" style="display:none;margin-top:10px;
         max-height:160px;overflow:auto;border:1px solid #ccc;padding:10px;">
      <!-- placeholder -->
      <label><input type="checkbox"> 21ME001 – Student A</label><br>
      <label><input type="checkbox"> 21ME002 – Student B</label><br>
      <label><input type="checkbox"> 21ME003 – Student C</label>
    </div>

    <button class="btn-main" onclick="dummy()">Enable Test</button>
  </div>

  <!-- EVALUATE -->
  <div id="evalPanel" class="box" style="display:none;">
    <p>Evaluate selected class test and publish results.</p>
    <button class="btn-main" onclick="dummy()">Evaluate & Publish</button>
  </div>

  <button class="btn-close" onclick="closeSection()">Close</button>
</div>

<!-- LOADER -->
<div id="loaderOverlay">
  <div class="spinner"></div>
  <div style="margin-top:12px;font-weight:600;">Loading…</div>
</div>

<div class="footer">
  Developed by Dr. Rajesh Akula
  <div>© 2026 · IIEST Shibpur</div>
</div>

</div>

<script>
/* ========= AUTH ========= */
const facultyToken = sessionStorage.getItem("facultyToken");
if(!facultyToken){
  sessionStorage.clear();
  location.replace("faculty_login.html");
}

/* ========= NAV ========= */
const home = document.getElementById("home");
const classTest = document.getElementById("classTest");

function openClassTest(){
  home.style.display="none";
  classTest.style.display="block";
}
function closeSection(){
  classTest.style.display="none";
  home.style.display="block";
}

/* ========= STATE ========= */
let selectedTest = null;

function selectTest(t){
  selectedTest = t;
  document.getElementById("actionPanel").style.display="block";
  document.getElementById("enablePanel").style.display="none";
  document.getElementById("evalPanel").style.display="none";
}

function showEnable(){
  document.getElementById("enablePanel").style.display="block";
  document.getElementById("evalPanel").style.display="none";
}
function showEvaluate(){
  document.getElementById("evalPanel").style.display="block";
  document.getElementById("enablePanel").style.display="none";
}
function showCustom(){
  document.getElementById("customList").style.display="block";
}

function dummy(){
  alert("UI ready ✔\nBackend will be connected in STEP 2");
}

/* ========= LOGOUT ========= */
function logout(){
  if(!confirm("Are you sure you want to logout?")) return;
  sessionStorage.clear();
  location.replace("faculty_login.html");
}
</script>

</body>
</html>
